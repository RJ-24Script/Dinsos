<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pengaduan Masyarakat — Dinsos Manokwari Selatan</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../assets/css/style.css" />
</head>
<body class="bg-slate-50">
  <div class="container mx-auto px-4 py-8 max-w-3xl">
    <a href="../index.html" class="text-blue-600 hover:underline">← Beranda</a>
    <h1 class="text-2xl font-bold mt-4 mb-6">Form Pengaduan Masyarakat</h1>

   <section class="pengaduan">
  <h1>Pengaduan Online</h1>

  <!-- GANTI src di bawah ini dengan link embed dari Google Form kamu -->
  <iframe 
    src=<iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfvLvrqhJVt1ZIpZHzvhOLq-_6W8rNc23tsdsdAzGaQ_FpZFg/viewform?embedded=true" width="640" height="1352" frameborder="0" marginheight="0" marginwidth="0">Memuat…</iframe>
    width="100%" height="900" frameborder="0" marginheight="0" marginwidth="0"
    style="border:0; width:100%; height:900px;"
    allowfullscreen>
  Memuat formulir…
  </iframe>

  <p style="margin-top:1rem; font-size:.95rem;">
    Setelah mengirim, laporan Anda otomatis tersimpan. 
    Tim kami akan memproses sesuai SOP. Jika perlu tindak lanjut, kami akan menghubungi kontak yang Anda isi.
  </p>
</section>
  
  <script>
    // Handler form sederhana (versi inline). Nanti bisa dipindahkan ke assets/js/main.js
    const GFORM_ENDPOINT = ""; // isi setelah Apps Script jadi.
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('form-pengaduan');
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const btn = form.querySelector('button[type="submit"]');
        const status = form.querySelector('[data-status]');
        btn.disabled = true; btn.textContent = 'Mengirim...';
        status.textContent = '';
        const data = Object.fromEntries(new FormData(form).entries());
        try {
          if (!GFORM_ENDPOINT) throw new Error('Endpoint belum diisi');
          const res = await fetch(GFORM_ENDPOINT, { method:'POST', body: JSON.stringify(data), headers:{'Content-Type':'application/json'} });
          if (!res.ok) throw new Error('Gagal mengirim');
          status.textContent = 'Pengaduan berhasil dikirim. Terima kasih!';
          form.reset();
        } catch (err) {
          status.textContent = 'Gagal mengirim. Coba lagi atau hubungi kami.';
          console.error(err);
        } finally {
          btn.disabled = false; btn.textContent = 'Kirim Pengaduan';
        }
      });
    });
  </script>
</body>
</html>
